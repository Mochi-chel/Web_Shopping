Betyg 3
Cart
List product
Method: AddProductToCart, ShowCart

Product
Name
Price (Optional)
Description (Optional)

Consumer
Name

Betyg 4
Product
Name
Amount of product
Price (Optional)
Description (Optional)

Consumer - Kan endast handla
Name

Staff - Kan Vad kan den göra?
Name

Admin - Vad kan den göra?
Name

Betyg 5
Staff - Kan se ordrar och packa dem


Admin - create product, edit product, delete product, addToCategory

Kanske kommer behöva ha logga in som personal eller konsument?
Nej, databasen får ha "Usertype" entitet, så att den kan identifiera direkt
om vilken typ av användare det är.


Database
User
username
password
type

Product
Name
AmountOfProduct

Order (Osäker)
orderId
username
status


Kod från pdf
Databasen för persistens.
package myapp.bo;
import myapp.db.Item;
public class Item {
private int id;
private String name;
private int price;
static public Collection searchItems(String
group)
{
return ItemDB.searchItems(group);
}
protected Item(int id , String name) {
this.id = id;
this.name = name;
}
public String getName() {
return name;
}
}


package myapp.db;
public class ItemDB extends Item {
    public static Collection searchItems(String
    group) {
        Vector v = new Vector();
        Connection con = DBManager.getConnetion();
        Statement st = con.createStatement();
        ResultSet rs = st.executeStatement("select
        item_id, name from Item where
        item_group = "+group);
        while (rs.next()) {
            int i = rs.getInt("item_id");
            String name = rs.getString("name");
            v.addElement(new ItemDB(i, name));
        }
        return v;
    }
    private ItemDB(int id, String name) {
    super(id, name);
    }
}



package myapp.bo;
public class LookItems {
    public Hashtable getItemsWithGroup(String s) {
        Collection c = Item.searchItems(s);
        Hashtable t = new HashTable();
        t.put("size", c.size());
        for (int i = 0, Iterator it = c.iterator();
        it.hasNext(); i++) {
            Hashtable item = new Hashtable();
            Item i = (Item) it.next();
            items.put("name", i.getName());
            items.put("price", i.getPrice());
            t.put("Item"+i, item);
        }
    return t;
    }
}




<%@page import="myapp.bo.LookItems" %>
<%@page import="java.util.Hashtable" >%
<%
String group =
request.getParameter("itemGroup");
LookItems look = new LookItems();
HashTable table =
look.getItemsWithGroup(group);
int size = table.get("size");
%>
<table>
<%
for (int i = 0 ; i < size ; i++) {
Hashtable item = table.get ("Item"+i);
%>
<tr>
<td> name </td> <td> <%= item.get("name")
%> </td>
<td> price </td> <td> <%= item.get("price")
%> </td>
</tr>
<% } %>
</table>











<%@ page language="java" contentType="text/html; charset=UTF-8" pageEncoding="UTF-8"%>
<%@ page import="java.util.List" %>
<%@ page import="model.Order" %>
<%@ page import="model.Item" %>
<%@ page import="model.User" %>
<%@ page import="model.User.UserType" %>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>View Orders</title>
    <style>
        /* Enkel styling för tabellen */
        table {
            width: 100%;
            border-collapse: collapse;
        }
        th, td {
            padding: 10px;
            text-align: left;
            border: 1px solid #ddd;
        }
        th {
            background-color: #f2f2f2;
        }
    </style>
</head>
<body>

<%
    // Hämta användaren från sessionen
    User user = (User) request.getSession().getAttribute("user");
    User.UserType userType = user != null ? user.getUserType() : null;

    if (userType == UserType.staff || userType == UserType.admin) {
        // Hämta alla beställningar från request-attributet
        List<Order> orders = (List<Order>) request.getAttribute("orders");
%>

<h2>All Orders</h2>

<%
    if (orders != null && !orders.isEmpty()) {
%>
<table>
    <thead>
    <tr>
        <th>Order ID</th>
        <th>Username</th>
        <th>Total Price</th>
        <th>Status</th>
        <th>Items in Order</th>
        <th>Action</th>
    </tr>
    </thead>
    <tbody>
    <%
        // Iterera över alla beställningar och skriv ut varje rad
        for (Order order : orders) {
    %>
    <tr>
        <td><%= order.getId() %></td>
        <td><%= order.getUser().getUserName() %></td>
        <td><%= order.getTotalPrice() %></td>
        <td><%= order.getStatus() %></td>
        <td>
            <table>
                <thead>
                <tr>
                    <th>Item ID</th>
                    <th>Name</th>
                    <th>Quantity</th>
                    <th>Price</th>
                </tr>
                </thead>
                <tbody>
                <%
                    // Iterera över items i ordern och skriv ut varje item
                    for (Item item : order.getUser().getCart().getList()) {
                %>
                <tr>
                    <td><%= item.getId() %></td>
                    <td><%= item.getName() %></td>
                    <td><%= item.getStock() %></td>
                    <td><%= item.getPrice() %></td>
                </tr>
                <%
                    }
                %>
                </tbody>
            </table>
        </td>
        <td>
            <form action="updateOrderStatus" method="post">
                <input type="hidden" name="orderId" value="<%= order.getId() %>" />
                <input type="hidden" name="newStatus" value="Packed" />
                <button type="submit">Pack</button>
            </form>
        </td>
    </tr>
    <%
        }
    %>
    </tbody>
</table>
<%
} else {
%>
<p>No orders found.</p>
<%
    }
} else {
%>
<p>Access Denied: You do not have permission to view this page.</p>
<%
    response.sendRedirect("login.jsp"); // Omdirigera användare som inte har behörighet
%>
<%
    }
%>


</body>
</html>
